function solve(){let e=!1;do{e=!1,eliminateCorrespondingCandidates(),(e=trySolve())||(blockColRowInteraction(),e=trySolve()),console.log("Loop complete!  hasBeenSolved is: "+e)}while(e&&!isSudokuComplete())}function eliminateCorrespondingCandidates(){for(row=1;row<=9;row++)for(col=1;col<=9;col++)if(isSolved(row,col)){const e=document.querySelector('[data-row="'+row+'"][data-col="'+col+'"]');let o=[...document.querySelectorAll('[data-row="'+row+'"], [data-col="'+col+'"]'),...e.parentElement.children];(o=(o=[...new Set(o)]).filter(e=>!isSolved(e.dataset.row,e.dataset.col))).forEach(function(o){removeCandidate(parseInt(o.dataset.row),parseInt(o.dataset.col),parseInt(e.value))})}}function removeCandidate(e,o,t){let l=document.querySelector('[data-row="'+e+'"][data-col="'+o+'"]'),a=JSON.parse(l.dataset.candidates);a=a.filter(e=>e!==t);let n=JSON.stringify(a);l.dataset.candidates=n,console.log(t+" removed from "+e+":"+o)}function trySolve(){let e=!1;for(row=1;row<=9;row++)for(col=1;col<=9;col++)if(!isSolved(row,col)){let o=document.querySelector('[data-row="'+row+'"][data-col="'+col+'"]');candidates=JSON.parse(o.dataset.candidates),1==candidates.length&&(o.value=candidates[0],e=!0)}return e}function isSolved(e,o){return!!document.querySelector('[data-row="'+e+'"][data-col="'+o+'"]').value}function isSudokuComplete(){let e=Array.from(document.querySelectorAll("input[type=number]"));return 81===(e=e.filter(e=>e.value.length>0)).length?console.log("Sudoku Completed!"):console.log("Sudoku not completed: only "+e.length+"/81 inputs solved!"),81===e.length}function blockColRowInteraction(){Array.from(document.getElementsByClassName("group")).forEach(function(e){let o=Array.from(e.children);o=o.filter(e=>e.value<1);for(let e=1;e<=9;e++){let t=[];o.forEach(function(o){JSON.parse(o.dataset.candidates).includes(e)&&t.push([o.dataset.row,o.dataset.col])});for(let o=0;o<=1;o++)if(t.every(e=>e[o]===t[0][o])&&t.length>1){let l=[];t.forEach(function(e){l.push(parseInt(e[Math.abs(o-1)]))});for(let a=1;a<=9;a++)l.includes(a)||(0===o?removeCandidate(t[0][0],a,e):removeCandidate(a,t[0][1],e))}}})}document.getElementById("solve").addEventListener("click",solve),document.querySelectorAll("input[type=number]").forEach(function(e){e.addEventListener("change",function(){this.dataset.candidates="["+this.value+"]",console.log(this)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBFdmVudCBsaXN0ZW5lcnMgZm9yIGlucHV0cyAqL1xyXG5cclxuLy8gRXZlbnQgbGlzdGVuZXIgZm9yIFwiU3VibWl0XCIgYnV0dG9uXHJcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzb2x2ZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc29sdmUpO1xyXG5cclxuLy8gRXZlbnQgbGlzdGVuZXIgZm9yIGFsbCBpbnB1dHNcclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1udW1iZXJdJykuZm9yRWFjaChmdW5jdGlvbiAoaW5wKSB7XHJcbiAgICBpbnAuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIFNldCB0aGlzIGlucHV0J3MgY2FuZGlkYXRlcyB0byBvbmx5IHRoaXMgaW5wdXQncyB2YWx1ZVxyXG4gICAgICAgIHRoaXMuZGF0YXNldC5jYW5kaWRhdGVzID0gJ1snICsgdGhpcy52YWx1ZSArICddJztcclxuXHJcbiAgICAgICAgLy8gRGVidWcgbG9nXHJcbiAgICAgICAgY29uc29sZS5sb2codGhpcyk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG4vLyBJdGVyYXRlIHRocm91Z2ggaW5wdXRzIHRyeWluZyB0byBzb2x2ZVxyXG5mdW5jdGlvbiBzb2x2ZSgpIHtcclxuICAgIGxldCBzb2x2ZUZvdW5kVGhpc0xvb3AgPSBmYWxzZTtcclxuICAgIGRvIHtcclxuICAgICAgICAvLyBSZXNldCBmbGFnXHJcbiAgICAgICAgc29sdmVGb3VuZFRoaXNMb29wID0gZmFsc2U7XHJcblxyXG4gICAgICAgIC8vIEVsaW1pbmF0ZSBjYW5kaWRhdGVzIGJhc2VkIG9uIHNvbHZlZCBpbnB1dHNcclxuICAgICAgICBlbGltaW5hdGVDb3JyZXNwb25kaW5nQ2FuZGlkYXRlcygpO1xyXG5cclxuICAgICAgICAvLyBUcnkgdG8gc29sdmVcclxuICAgICAgICBzb2x2ZUZvdW5kVGhpc0xvb3AgPSB0cnlTb2x2ZSgpO1xyXG5cclxuICAgICAgICAvLyBPbmx5IGV4ZWN1dGVzIGlmIG5vIHNvbHZlIGhhcyBiZWVuIGZvdW5kIHRoaXMgbG9vcFxyXG4gICAgICAgIGlmICghc29sdmVGb3VuZFRoaXNMb29wKSB7XHJcbiAgICAgICAgICAgIC8vIEVsaW1pbmF0ZSBjYW5kaWRhdGVzIGJhc2VkIG9uIGJsb2NrICBjb2x1bW4vcm93IGludGVyYWN0aW9uXHJcbiAgICAgICAgICAgIGJsb2NrQ29sUm93SW50ZXJhY3Rpb24oKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFRyeSB0byBzb2x2ZVxyXG4gICAgICAgICAgICBzb2x2ZUZvdW5kVGhpc0xvb3AgPSB0cnlTb2x2ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRGVidWcgTG9nXHJcbiAgICAgICAgY29uc29sZS5sb2coXCJMb29wIGNvbXBsZXRlISAgaGFzQmVlblNvbHZlZCBpczogXCIgKyBzb2x2ZUZvdW5kVGhpc0xvb3ApO1xyXG4gICAgfSB3aGlsZSAoc29sdmVGb3VuZFRoaXNMb29wICYmICFpc1N1ZG9rdUNvbXBsZXRlKCkpO1xyXG5cclxufVxyXG5cclxuLy8gTG9vcCB0aHJvdWdoIGFsbCBzb2x2ZWQgaW5wdXRzIGFuZCByZW1vdmUgdGhlaXIgdmFsdWVzIGZyb20gY29ycmVzcG9uZGluZyBjYW5kaWRhdGVzXHJcbmZ1bmN0aW9uIGVsaW1pbmF0ZUNvcnJlc3BvbmRpbmdDYW5kaWRhdGVzKCkge1xyXG4gICAgZm9yIChyb3cgPSAxOyByb3cgPD0gOTsgcm93KyspIHtcclxuICAgICAgICBmb3IgKGNvbCA9IDE7IGNvbCA8PSA5OyBjb2wrKykge1xyXG4gICAgICAgICAgICAvLyBJZiBzb2x2ZWQsIGVsaW1pbmF0ZSBjb3JyZXNwb25kaW5nIGNhbmRpZGF0ZXMgaW4gb3RoZXIgcG9zaXRpb25zXHJcbiAgICAgICAgICAgIGlmIChpc1NvbHZlZChyb3csIGNvbCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIEdldCB2YWx1ZSBsb2NhdGlvbiBmcm9tIHJvdywgY29sXHJcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXJvdz1cIicgKyByb3cgKyAnXCJdW2RhdGEtY29sPVwiJyArIGNvbCArICdcIl0nKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBBcnJheSBvZiBhbGwgZWxlbWVudHMgaW4gcm93LCBjb2x1bW4sIGFuZCBncm91cFxyXG4gICAgICAgICAgICAgICAgbGV0IGVsZW1lbnRzVG9FbGltaW5hdGUgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtcm93PVwiJyArIHJvdyArICdcIl0sIFtkYXRhLWNvbD1cIicgKyBjb2wgKyAnXCJdJyksXHJcbiAgICAgICAgICAgICAgICAgICAgLi4ubG9jYXRpb24ucGFyZW50RWxlbWVudC5jaGlsZHJlblxyXG4gICAgICAgICAgICAgICAgXVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBkdXBsaWNhdGVzXHJcbiAgICAgICAgICAgICAgICBlbGVtZW50c1RvRWxpbWluYXRlID0gWy4uLm5ldyBTZXQoZWxlbWVudHNUb0VsaW1pbmF0ZSldXHJcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgc29sdmVkIGlucHV0c1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudHNUb0VsaW1pbmF0ZSA9IGVsZW1lbnRzVG9FbGltaW5hdGUuZmlsdGVyKGVsZW1lbnQgPT4gIShpc1NvbHZlZChlbGVtZW50LmRhdGFzZXQucm93LCBlbGVtZW50LmRhdGFzZXQuY29sKSkpO1xyXG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHZhbHVlIGZyb20gcmVtYWluaW5nIGNhbmRpZGF0ZXNcclxuICAgICAgICAgICAgICAgIGVsZW1lbnRzVG9FbGltaW5hdGUuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUNhbmRpZGF0ZShwYXJzZUludChlbGVtZW50LmRhdGFzZXQucm93KSwgcGFyc2VJbnQoZWxlbWVudC5kYXRhc2V0LmNvbCksIHBhcnNlSW50KGxvY2F0aW9uLnZhbHVlKSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vLyBSZW1vdmUgdmFsdWUgZnJvbSBjYW5kaWRhdGVzIGF0IGxvY2F0aW9uIChyb3cvY29sKVxyXG5mdW5jdGlvbiByZW1vdmVDYW5kaWRhdGUocm93LCBjb2wsIHZhbHVlKSB7XHJcbiAgICAvLyBTZWxlY3QgbG9jYXRpb24gZGVwZW5kaW5nIG9uIHJvdyBhbmQgY29sXHJcbiAgICBsZXQgbG9jYXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1yb3c9XCInICsgcm93ICsgJ1wiXVtkYXRhLWNvbD1cIicgKyBjb2wgKyAnXCJdJyk7XHJcbiAgICAvLyBQYXJzZSBKU09OXHJcbiAgICBsZXQgY2FuZGlkYXRlcyA9IEpTT04ucGFyc2UobG9jYXRpb24uZGF0YXNldC5jYW5kaWRhdGVzKTtcclxuICAgIC8vIFJlbW92ZSB2YWx1ZSBmcm9tIGNhbmRpZGF0ZXMgYXJyYXlcclxuICAgIGNhbmRpZGF0ZXMgPSBjYW5kaWRhdGVzLmZpbHRlcihpdGVtID0+IGl0ZW0gIT09IHZhbHVlKTtcclxuICAgIC8vIENvbnZlcnQgYmFjayBpbnRvIEpTT04gb2JqZWN0XHJcbiAgICBsZXQgcmVzdWx0ID0gSlNPTi5zdHJpbmdpZnkoY2FuZGlkYXRlcyk7XHJcbiAgICAvLyBVcGRhdGUgZGF0YS1jYW5kaWRhdGVzIGF0dHJpYnV0ZSBhdCBsb2NhdGlvblxyXG4gICAgbG9jYXRpb24uZGF0YXNldC5jYW5kaWRhdGVzID0gcmVzdWx0O1xyXG4gICAgLy8gRGVidWcgbG9nXHJcbiAgICBjb25zb2xlLmxvZyh2YWx1ZSArIFwiIHJlbW92ZWQgZnJvbSBcIiArIHJvdyArIFwiOlwiICsgY29sKTtcclxufVxyXG5cclxuLy8gTG9vcCB0aHJvdWdoIGFsbCBsb2NhdGlvbnM7IGlmIG9ubHkgb25lIGNhbmRpZGF0ZSBhdCBsb2NhdGlvbiwgc2V0IHRoYXQgaW5wdXQncyB2YWx1ZSB0byB0aGUgY2FuZGlkYXRlIGFuZCByZXR1cm4gdHJ1ZVxyXG5mdW5jdGlvbiB0cnlTb2x2ZSgpIHtcclxuICAgIGxldCBzb2x1dGlvbkZvdW5kID0gZmFsc2U7XHJcbiAgICBmb3IgKHJvdyA9IDE7IHJvdyA8PSA5OyByb3crKykge1xyXG4gICAgICAgIGZvciAoY29sID0gMTsgY29sIDw9IDk7IGNvbCsrKSB7XHJcbiAgICAgICAgICAgIC8vIElmIHVuc29sdmVkLCBhdHRlbXB0IHRvIHNvbHZlXHJcbiAgICAgICAgICAgIGlmICghaXNTb2x2ZWQocm93LCBjb2wpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTb2x2ZSBpbnB1dCBpZiB0aGVyZSdzIG9ubHkgb25lIGNhbmRpZGF0ZVxyXG4gICAgICAgICAgICAgICAgLy8gU2VsZWN0IGxvY2F0aW9uIGRlcGVuZGluZyBvbiByb3cgYW5kIGNvbFxyXG4gICAgICAgICAgICAgICAgbGV0IGxvY2F0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtcm93PVwiJyArIHJvdyArICdcIl1bZGF0YS1jb2w9XCInICsgY29sICsgJ1wiXScpO1xyXG4gICAgICAgICAgICAgICAgLy8gUGFyc2UgSlNPTlxyXG4gICAgICAgICAgICAgICAgY2FuZGlkYXRlcyA9IEpTT04ucGFyc2UobG9jYXRpb24uZGF0YXNldC5jYW5kaWRhdGVzKTtcclxuICAgICAgICAgICAgICAgIC8vIElmIG9ubHkgb25lIGNhbmRpZGF0ZSBhdCBsb2NhdGlvbiwgc2V0IGxvY2F0aW9uJ3MgdmFsdWVcclxuICAgICAgICAgICAgICAgIGlmIChjYW5kaWRhdGVzLmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24udmFsdWUgPSBjYW5kaWRhdGVzWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIHNvbHV0aW9uRm91bmQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNvbHV0aW9uRm91bmQ7XHJcbn1cclxuXHJcbi8vIFJldHVybnMgdHJ1ZSBpZiBpbnB1dCBoYXMgYSBudW1lcmljYWwgdmFsdWVcclxuZnVuY3Rpb24gaXNTb2x2ZWQocm93LCBjb2wpIHtcclxuICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1yb3c9XCInICsgcm93ICsgJ1wiXVtkYXRhLWNvbD1cIicgKyBjb2wgKyAnXCJdJykudmFsdWUgPyB0cnVlIDogZmFsc2U7XHJcbn1cclxuXHJcbi8vIFJldHVybnMgdHJ1ZSBpZiBhbGwgaW5wdXRzIGhhdmUgYSB2YWx1ZVxyXG5mdW5jdGlvbiBpc1N1ZG9rdUNvbXBsZXRlKCkge1xyXG4gICAgLy8gR2V0IGFsbCBpbnB1dHMgb2YgdHlwZSBudW1iZXJcclxuICAgIGxldCByZXN1bHRzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPW51bWJlcl0nKSk7XHJcbiAgICAvLyBGaWx0ZXIgb3V0IGFueSBpbnB1dHMgdGhhdCBoYXZlIG5vIHZhbHVlXHJcbiAgICByZXN1bHRzID0gcmVzdWx0cy5maWx0ZXIoZWxlbWVudCA9PiBlbGVtZW50LnZhbHVlLmxlbmd0aCA+IDApO1xyXG5cclxuICAgIC8vIERlYnVnIExvZ1xyXG4gICAgaWYgKHJlc3VsdHMubGVuZ3RoID09PSA4MSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiU3Vkb2t1IENvbXBsZXRlZCFcIilcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJTdWRva3Ugbm90IGNvbXBsZXRlZDogb25seSBcIiArIHJlc3VsdHMubGVuZ3RoICsgXCIvODEgaW5wdXRzIHNvbHZlZCFcIik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgdGhlIHJlc3VsdHMgYXJyYXkgaGFzIDgxIG1lbWJlcnMsIHRoZSBzdWRva3UgaXMgY29tcGxldGVcclxuICAgIHJldHVybiByZXN1bHRzLmxlbmd0aCA9PT0gODEgPyB0cnVlIDogZmFsc2U7XHJcbn1cclxuXHJcbi8vIEJsb2NrIGFuZCBjb2x1bW4vcm93IGludGVyYWN0aW9uXHJcbi8vIGh0dHBzOi8vd3d3LmtyaXN0YW5peC5jb20vc3Vkb2t1ZXBpYy9zdWRva3Utc29sdmluZy10ZWNobmlxdWVzLnBocFxyXG5mdW5jdGlvbiBibG9ja0NvbFJvd0ludGVyYWN0aW9uKCkge1xyXG4gICAgLy8gQ3JlYXRlIGFuIGFycmF5IG9mIGFsbCB0aGUgZ3JvdXBzXHJcbiAgICBsZXQgZ3JvdXBzID0gQXJyYXkuZnJvbShkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdncm91cCcpKTtcclxuICAgIC8vIEZvciBlYWNoIGdyb3VwXHJcbiAgICBncm91cHMuZm9yRWFjaChmdW5jdGlvbiAoZ3JvdXApIHtcclxuICAgICAgICAvLyBDcmVhdGUgYW4gYXJyYXkgb2YgYWxsIGlucHV0cyBpbiB0aGUgZ3JvdXBcclxuICAgICAgICBsZXQgaW5wdXRzID0gQXJyYXkuZnJvbShncm91cC5jaGlsZHJlbik7XHJcbiAgICAgICAgLy9SZW1vdmUgc29sdmVkIGNhbmRpZGF0ZXNcclxuICAgICAgICBpbnB1dHMgPSBpbnB1dHMuZmlsdGVyKGlucHV0ID0+IGlucHV0LnZhbHVlIDwgMSk7XHJcbiAgICAgICAgLy9Gb3IgZWFjaCBudW1iZXIgKGNhbmRpZGF0ZSkgYmV0d2VlbiAxLTlcclxuICAgICAgICBmb3IgKGxldCBjYW5kaWRhdGUgPSAxOyBjYW5kaWRhdGUgPD0gOTsgY2FuZGlkYXRlKyspIHtcclxuICAgICAgICAgICAgbGV0IGxvY2F0aW9ucyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgaW5wdXRzLmZvckVhY2goZnVuY3Rpb24gKGlucHV0KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgaW5wdXQncyBjYW5kaWRhdGVzIGNvbnRhaW4gdGhlIGNhbmRpZGF0ZVxyXG4gICAgICAgICAgICAgICAgaWYgKEpTT04ucGFyc2UoaW5wdXQuZGF0YXNldC5jYW5kaWRhdGVzKS5pbmNsdWRlcyhjYW5kaWRhdGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUHVzaCB0aGUgZGF0YS1jb2wgdmFsdWUgdG8gbG9jYXRpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25zLnB1c2goW2lucHV0LmRhdGFzZXQucm93LCBpbnB1dC5kYXRhc2V0LmNvbF0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgLy8gV2hlbiBtb2RlID0gMDsgcm93cyBhcmUgaGFuZGxlZC4gIFdoZW4gbW9kZSA9IDE7IGNvbHVtbnMgYXJlIGhhbmRsZWRcclxuICAgICAgICAgICAgZm9yIChsZXQgbW9kZSA9IDA7IG1vZGUgPD0gMTsgbW9kZSsrKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiBhbGwgbGluZSBsb2NhdGlvbiB2YWx1ZXMgaW4gdGhlIGFycmF5IGFyZSBlcXVhbFxyXG4gICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9ucy5ldmVyeShsb2NhdGlvbiA9PiBsb2NhdGlvblttb2RlXSA9PT0gbG9jYXRpb25zWzBdW21vZGVdKSAmJiBsb2NhdGlvbnMubGVuZ3RoID4gMSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBGbGF0dGVuIDJEIGFycmF5IGludG8gMUQgYXJyYXkgb2YgbGluZSBsb2NhdGlvbnNcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbGluZUxvY2F0aW9ucyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hdGguYWJzKG1vZGUtMSkgcmV0dXJucyAxIHdoZW4gbW9kZSA9IDAsIGFuZCAwIHdoZW4gbW9kZSA9IDFcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGluZUxvY2F0aW9ucy5wdXNoKHBhcnNlSW50KGVsZW1lbnRbTWF0aC5hYnMobW9kZSAtIDEpXSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGxpbmUgPSAxOyBsaW5lIDw9IDk7IGxpbmUrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxpbmVMb2NhdGlvbnMuaW5jbHVkZXMobGluZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoaXMgY2FuZGlkYXRlIGZyb20gYWxsIGlucHV0cyB0aGF0IHNoYXJlIHRoYXQgcm93IG51bWJlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUNhbmRpZGF0ZShsb2NhdGlvbnNbMF1bMF0sIGxpbmUsIGNhbmRpZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGlzIGNhbmRpZGF0ZSBmcm9tIGFsbCBpbnB1dHMgdGhhdCBzaGFyZSB0aGF0IGNvbHVtbiBudW1iZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVDYW5kaWRhdGUobGluZSwgbG9jYXRpb25zWzBdWzFdLCBjYW5kaWRhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn1cclxuIl19
