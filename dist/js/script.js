function solve(){let e=!1;do{for(e=!1,i=1;i<=9;i++)for(j=1;j<=9;j++)isSolved(i,j)&&eliminateCorrespondingCandidates(i,j);for(i=1;i<=9;i++)for(j=1;j<=9;j++)isSolved(i,j)||(trySolveForSingleCandidate(i,j),!e&&isSolved(i,j)&&(e=!0));console.log("Loop complete!  hasBeenSolved is: "+e)}while(e&&!isSudokuComplete())}function eliminateCorrespondingCandidates(e,t){const o=document.querySelector('[data-row="'+e+'"][data-col="'+t+'"]');let n=[...document.querySelectorAll('[data-row="'+e+'"], [data-col="'+t+'"]'),...o.parentElement.children];(n=(n=[...new Set(n)]).filter(e=>!isSolved(e.dataset.row,e.dataset.col))).forEach(function(e){removeCandidate(parseInt(e.dataset.row),parseInt(e.dataset.col),parseInt(o.value))})}function removeCandidate(e,t,o){let n=document.querySelector('[data-row="'+e+'"][data-col="'+t+'"]'),a=JSON.parse(n.dataset.candidates);a=a.filter(e=>e!==o);let l=JSON.stringify(a);n.dataset.candidates=l,console.log(o+" removed from "+e+":"+t)}function trySolveForSingleCandidate(e,t){let o=document.querySelector('[data-row="'+e+'"][data-col="'+t+'"]');return candidates=JSON.parse(o.dataset.candidates),1==candidates.length&&(o.value=candidates[0],!0)}function isSolved(e,t){return!!document.querySelector('[data-row="'+e+'"][data-col="'+t+'"]').value}function isSudokuComplete(){let e=Array.from(document.querySelectorAll("input[type=number]"));return 81===(e=e.filter(e=>e.value.length>0)).length?console.log("Sudoku Completed!"):console.log("Sudoku not completed: only "+e.length+"/81 inputs solved!"),81===e.length}function blockColRowInteraction(){Array.from(document.getElementsByClassName("group")).forEach(function(e){let t=Array.from(e.children);t=t.filter(e=>e.value<1);for(let e=1;e<=9;e++){let o=[];if(t.forEach(function(t){JSON.parse(t.dataset.candidates).includes(e)&&o.push([t.dataset.row,t.dataset.col])}),o.every(e=>e[0]===o[0][0])&&o.length>1){let t=[];o.forEach(function(e){t.push(parseInt(e[1]))});for(let n=1;n<=9;n++)t.includes(n)||removeCandidate(o[0][0],n,e)}if(o.every(e=>e[1]===o[0][1])&&o.length>1){let t=[];o.forEach(function(e){t.push(parseInt(e[0]))});for(let n=1;n<=9;n++)t.includes(n)||removeCandidate(o[0][1],n,e)}}})}document.getElementById("solve").addEventListener("click",solve),document.querySelectorAll("input[type=number]").forEach(function(e){e.addEventListener("change",function(){this.dataset.candidates="["+this.value+"]",console.log(this)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6InNjcmlwdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIEV2ZW50IGxpc3RlbmVycyBmb3IgaW5wdXRzICovXHJcblxyXG4vLyBFdmVudCBsaXN0ZW5lciBmb3IgXCJTdWJtaXRcIiBidXR0b25cclxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NvbHZlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzb2x2ZSk7XHJcblxyXG4vLyBFdmVudCBsaXN0ZW5lciBmb3IgYWxsIGlucHV0c1xyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPW51bWJlcl0nKS5mb3JFYWNoKGZ1bmN0aW9uIChpbnApIHtcclxuICAgIGlucC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gU2V0IHRoaXMgaW5wdXQncyBjYW5kaWRhdGVzIHRvIG9ubHkgdGhpcyBpbnB1dCdzIHZhbHVlXHJcbiAgICAgICAgdGhpcy5kYXRhc2V0LmNhbmRpZGF0ZXMgPSAnWycgKyB0aGlzLnZhbHVlICsgJ10nO1xyXG5cclxuICAgICAgICAvLyBEZWJ1ZyBsb2dcclxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8vIEl0ZXJhdGUgdGhyb3VnaCBpbnB1dHMgdHJ5aW5nIHRvIHNvbHZlXHJcbmZ1bmN0aW9uIHNvbHZlKCkge1xyXG4gICAgbGV0IHNvbHZlRm91bmRUaGlzTG9vcCA9IGZhbHNlO1xyXG4gICAgZG8ge1xyXG4gICAgICAgIC8vIFJlc2V0IGZsYWdcclxuICAgICAgICBzb2x2ZUZvdW5kVGhpc0xvb3AgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgLy8gSGFuZGxlIHNvbHZlZCBpbnB1dHNcclxuICAgICAgICBmb3IgKGkgPSAxOyBpIDw9IDk7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGogPSAxOyBqIDw9IDk7IGorKykge1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgc29sdmVkLCBlbGltaW5hdGUgY29ycmVzcG9uZGluZyBjYW5kaWRhdGVzIGluIG90aGVyIHBvc2l0aW9uc1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzU29sdmVkKGksIGopKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxpbWluYXRlQ29ycmVzcG9uZGluZ0NhbmRpZGF0ZXMoaSwgaik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEhhbmRsZSB1bnNvbHZlZCBpbnB1dHNcclxuICAgICAgICBmb3IgKGkgPSAxOyBpIDw9IDk7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGogPSAxOyBqIDw9IDk7IGorKykge1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgdW5zb2x2ZWQsIGF0dGVtcHQgdG8gc29sdmVcclxuICAgICAgICAgICAgICAgIGlmICghaXNTb2x2ZWQoaSwgaikpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBTb2x2ZSBpbnB1dCBpZiB0aGVyZSdzIG9ubHkgb25lIGNhbmRpZGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgIHRyeVNvbHZlRm9yU2luZ2xlQ2FuZGlkYXRlKGksIGopO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHNvbHZlRm91bmRUaGlzTG9vcCBpcyBmYWxzZSBhbmQgYSBuZXcgc29sdXRpb24gaGFzIGJlZW4gZm91bmQsIHNldCBzb2x2ZUZvdW5kVGhpc0xvb3AgdG8gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghc29sdmVGb3VuZFRoaXNMb29wICYmIGlzU29sdmVkKGksIGopKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvbHZlRm91bmRUaGlzTG9vcCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIERlYnVnIExvZ1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiTG9vcCBjb21wbGV0ZSEgIGhhc0JlZW5Tb2x2ZWQgaXM6IFwiICsgc29sdmVGb3VuZFRoaXNMb29wKTtcclxuICAgIH0gd2hpbGUgKHNvbHZlRm91bmRUaGlzTG9vcCAmJiAhaXNTdWRva3VDb21wbGV0ZSgpKTtcclxuXHJcbiAgICAvLyBUT0RPIEludGVncmF0ZSBibG9ja0NvbFJvd0ludGVyYWN0aW9uKCkgaW50byB0aGUgc29sdmVcclxufVxyXG5cclxuZnVuY3Rpb24gZWxpbWluYXRlQ29ycmVzcG9uZGluZ0NhbmRpZGF0ZXMocm93LCBjb2wpIHtcclxuXHJcbiAgICAvLyBHZXQgdmFsdWUgbG9jYXRpb24gZnJvbSByb3csIGNvbFxyXG4gICAgY29uc3QgbG9jYXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1yb3c9XCInICsgcm93ICsgJ1wiXVtkYXRhLWNvbD1cIicgKyBjb2wgKyAnXCJdJyk7XHJcblxyXG4gICAgLy8gQXJyYXkgb2YgYWxsIGVsZW1lbnRzIGluIHJvdywgY29sdW1uLCBhbmQgZ3JvdXBcclxuICAgIGxldCBlbGVtZW50c1RvRWxpbWluYXRlID0gW1xyXG4gICAgICAgIC4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXJvdz1cIicgKyByb3cgKyAnXCJdLCBbZGF0YS1jb2w9XCInICsgY29sICsgJ1wiXScpLFxyXG4gICAgICAgIC4uLmxvY2F0aW9uLnBhcmVudEVsZW1lbnQuY2hpbGRyZW5cclxuICAgIF1cclxuXHJcbiAgICAvLyBSZW1vdmUgZHVwbGljYXRlc1xyXG4gICAgZWxlbWVudHNUb0VsaW1pbmF0ZSA9IFsuLi5uZXcgU2V0KGVsZW1lbnRzVG9FbGltaW5hdGUpXVxyXG4gICAgLy8gUmVtb3ZlIHNvbHZlZCBpbnB1dHNcclxuICAgIGVsZW1lbnRzVG9FbGltaW5hdGUgPSBlbGVtZW50c1RvRWxpbWluYXRlLmZpbHRlcihlbGVtZW50ID0+ICEoaXNTb2x2ZWQoZWxlbWVudC5kYXRhc2V0LnJvdywgZWxlbWVudC5kYXRhc2V0LmNvbCkpKTtcclxuICAgIC8vIFJlbW92ZSB2YWx1ZSBmcm9tIHJlbWFpbmluZyBjYW5kaWRhdGVzXHJcbiAgICBlbGVtZW50c1RvRWxpbWluYXRlLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICByZW1vdmVDYW5kaWRhdGUocGFyc2VJbnQoZWxlbWVudC5kYXRhc2V0LnJvdyksIHBhcnNlSW50KGVsZW1lbnQuZGF0YXNldC5jb2wpLCBwYXJzZUludChsb2NhdGlvbi52YWx1ZSkpO1xyXG4gICAgfSlcclxuXHJcbn1cclxuXHJcbi8vIFJlbW92ZSB2YWx1ZSBmcm9tIGNhbmRpZGF0ZXMgYXQgbG9jYXRpb24gKHJvdy9jb2wpXHJcbmZ1bmN0aW9uIHJlbW92ZUNhbmRpZGF0ZShyb3csIGNvbCwgdmFsdWUpIHtcclxuICAgIC8vIFNlbGVjdCBsb2NhdGlvbiBkZXBlbmRpbmcgb24gcm93IGFuZCBjb2xcclxuICAgIGxldCBsb2NhdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXJvdz1cIicgKyByb3cgKyAnXCJdW2RhdGEtY29sPVwiJyArIGNvbCArICdcIl0nKTtcclxuICAgIC8vIFBhcnNlIEpTT05cclxuICAgIGxldCBjYW5kaWRhdGVzID0gSlNPTi5wYXJzZShsb2NhdGlvbi5kYXRhc2V0LmNhbmRpZGF0ZXMpO1xyXG4gICAgLy8gUmVtb3ZlIHZhbHVlIGZyb20gY2FuZGlkYXRlcyBhcnJheVxyXG4gICAgY2FuZGlkYXRlcyA9IGNhbmRpZGF0ZXMuZmlsdGVyKGl0ZW0gPT4gaXRlbSAhPT0gdmFsdWUpO1xyXG4gICAgLy8gQ29udmVydCBiYWNrIGludG8gSlNPTiBvYmplY3RcclxuICAgIGxldCByZXN1bHQgPSBKU09OLnN0cmluZ2lmeShjYW5kaWRhdGVzKTtcclxuICAgIC8vIFVwZGF0ZSBkYXRhLWNhbmRpZGF0ZXMgYXR0cmlidXRlIGF0IGxvY2F0aW9uXHJcbiAgICBsb2NhdGlvbi5kYXRhc2V0LmNhbmRpZGF0ZXMgPSByZXN1bHQ7XHJcbiAgICAvLyBEZWJ1ZyBsb2dcclxuICAgIGNvbnNvbGUubG9nKHZhbHVlICsgXCIgcmVtb3ZlZCBmcm9tIFwiICsgcm93ICsgXCI6XCIgKyBjb2wpO1xyXG59XHJcblxyXG4vLyBJZiB0aGVyZSBpcyBvbmx5IG9uZSBjYW5kaWRhdGUgYXQgbG9jYXRpb24sIHNldCB0aGF0IGlucHV0J3MgdmFsdWUgdG8gdGhlIGNhbmRpZGF0ZSBhbmQgcmV0dXJuIHRydWVcclxuZnVuY3Rpb24gdHJ5U29sdmVGb3JTaW5nbGVDYW5kaWRhdGUocm93LCBjb2wpIHtcclxuICAgIC8vIFNlbGVjdCBsb2NhdGlvbiBkZXBlbmRpbmcgb24gcm93IGFuZCBjb2xcclxuICAgIGxldCBsb2NhdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXJvdz1cIicgKyByb3cgKyAnXCJdW2RhdGEtY29sPVwiJyArIGNvbCArICdcIl0nKTtcclxuICAgIC8vIFBhcnNlIEpTT05cclxuICAgIGNhbmRpZGF0ZXMgPSBKU09OLnBhcnNlKGxvY2F0aW9uLmRhdGFzZXQuY2FuZGlkYXRlcyk7XHJcbiAgICAvLyBJZiBvbmx5IG9uZSBjYW5kaWRhdGUgYXQgbG9jYXRpb24sIHNldCBsb2NhdGlvbidzIHZhbHVlXHJcbiAgICBpZiAoY2FuZGlkYXRlcy5sZW5ndGggPT0gMSkge1xyXG4gICAgICAgIGxvY2F0aW9uLnZhbHVlID0gY2FuZGlkYXRlc1swXTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBSZXR1cm5zIHRydWUgaWYgaW5wdXQgaGFzIGEgbnVtZXJpY2FsIHZhbHVlXHJcbmZ1bmN0aW9uIGlzU29sdmVkKHJvdywgY29sKSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtcm93PVwiJyArIHJvdyArICdcIl1bZGF0YS1jb2w9XCInICsgY29sICsgJ1wiXScpLnZhbHVlID8gdHJ1ZSA6IGZhbHNlO1xyXG59XHJcblxyXG4vLyBSZXR1cm5zIHRydWUgaWYgYWxsIGlucHV0cyBoYXZlIGEgdmFsdWVcclxuZnVuY3Rpb24gaXNTdWRva3VDb21wbGV0ZSgpIHtcclxuICAgIC8vIEdldCBhbGwgaW5wdXRzIG9mIHR5cGUgbnVtYmVyXHJcbiAgICBsZXQgcmVzdWx0cyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1udW1iZXJdJykpO1xyXG4gICAgLy8gRmlsdGVyIG91dCBhbnkgaW5wdXRzIHRoYXQgaGF2ZSBubyB2YWx1ZVxyXG4gICAgcmVzdWx0cyA9IHJlc3VsdHMuZmlsdGVyKGVsZW1lbnQgPT4gZWxlbWVudC52YWx1ZS5sZW5ndGggPiAwKTtcclxuXHJcbiAgICAvLyBEZWJ1ZyBMb2dcclxuICAgIGlmIChyZXN1bHRzLmxlbmd0aCA9PT0gODEpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIlN1ZG9rdSBDb21wbGV0ZWQhXCIpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiU3Vkb2t1IG5vdCBjb21wbGV0ZWQ6IG9ubHkgXCIgKyByZXN1bHRzLmxlbmd0aCArIFwiLzgxIGlucHV0cyBzb2x2ZWQhXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHRoZSByZXN1bHRzIGFycmF5IGhhcyA4MSBtZW1iZXJzLCB0aGUgc3Vkb2t1IGlzIGNvbXBsZXRlXHJcbiAgICByZXR1cm4gcmVzdWx0cy5sZW5ndGggPT09IDgxID8gdHJ1ZSA6IGZhbHNlO1xyXG59XHJcblxyXG4vL1RPRE8gUmVmYWN0b3IgYmxvY2tDb2xSb3dJbnRlcmFjdGlvbigpXHJcblxyXG4vLyBCbG9jayBhbmQgY29sdW1uL3JvdyBpbnRlcmFjdGlvblxyXG4vLyBodHRwczovL3d3dy5rcmlzdGFuaXguY29tL3N1ZG9rdWVwaWMvc3Vkb2t1LXNvbHZpbmctdGVjaG5pcXVlcy5waHBcclxuZnVuY3Rpb24gYmxvY2tDb2xSb3dJbnRlcmFjdGlvbigpIHtcclxuICAgIC8vIENyZWF0ZSBhbiBhcnJheSBvZiBhbGwgdGhlIGdyb3Vwc1xyXG4gICAgbGV0IGdyb3VwcyA9IEFycmF5LmZyb20oZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZ3JvdXAnKSk7XHJcbiAgICAvLyBGb3IgZWFjaCBncm91cFxyXG4gICAgZ3JvdXBzLmZvckVhY2goZnVuY3Rpb24gKGdyb3VwKSB7XHJcbiAgICAgICAgLy8gQ3JlYXRlIGFuIGFycmF5IG9mIGFsbCBpbnB1dHMgaW4gdGhlIGdyb3VwXHJcbiAgICAgICAgbGV0IGlucHV0cyA9IEFycmF5LmZyb20oZ3JvdXAuY2hpbGRyZW4pO1xyXG4gICAgICAgIC8vUmVtb3ZlIHNvbHZlZCBjYW5kaWRhdGVzXHJcbiAgICAgICAgaW5wdXRzID0gaW5wdXRzLmZpbHRlcihpbnB1dCA9PiBpbnB1dC52YWx1ZSA8IDEpO1xyXG4gICAgICAgIC8vRm9yIGVhY2ggbnVtYmVyIChjYW5kaWRhdGUpIGJldHdlZW4gMS05XHJcbiAgICAgICAgZm9yIChsZXQgY2FuZGlkYXRlID0gMTsgY2FuZGlkYXRlIDw9IDk7IGNhbmRpZGF0ZSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBsb2NhdGlvbnMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIGlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uIChpbnB1dCkge1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGlucHV0J3MgY2FuZGlkYXRlcyBjb250YWluIHRoZSBjYW5kaWRhdGVcclxuICAgICAgICAgICAgICAgIGlmIChKU09OLnBhcnNlKGlucHV0LmRhdGFzZXQuY2FuZGlkYXRlcykuaW5jbHVkZXMoY2FuZGlkYXRlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFB1c2ggdGhlIGRhdGEtY29sIHZhbHVlIHRvIGxvY2F0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9ucy5wdXNoKFtpbnB1dC5kYXRhc2V0LnJvdywgaW5wdXQuZGF0YXNldC5jb2xdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIC8vIElmIGFsbCByb3cgbG9jYXRpb24gdmFsdWVzIGluIHRoZSBhcnJheSBhcmUgZXF1YWxcclxuICAgICAgICAgICAgaWYgKGxvY2F0aW9ucy5ldmVyeShsb2NhdGlvbiA9PiBsb2NhdGlvblswXSA9PT0gbG9jYXRpb25zWzBdWzBdKSAmJiBsb2NhdGlvbnMubGVuZ3RoID4gMSkge1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIEZsYXR0ZW4gMkQgYXJyYXkgaW50byAxRCBhcnJheSBvZiBjb2x1bW4gbG9jYXRpb25zXHJcbiAgICAgICAgICAgICAgICBsZXQgY29sTG9jYXRpb25zID0gW107XHJcbiAgICAgICAgICAgICAgICBsb2NhdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbExvY2F0aW9ucy5wdXNoKHBhcnNlSW50KGVsZW1lbnRbMV0pKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgY29sID0gMTsgY29sIDw9IDk7IGNvbCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgbG9jYXRpb24gaXMgbm90IGluIHRoZSBjdXJyZW50IGdyb3VwXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb2xMb2NhdGlvbnMuaW5jbHVkZXMoY29sKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhpcyBjYW5kaWRhdGUgZnJvbSBhbGwgaW5wdXRzIHRoYXQgc2hhcmUgdGhhdCByb3cgbnVtYmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUNhbmRpZGF0ZShsb2NhdGlvbnNbMF1bMF0sIGNvbCwgY2FuZGlkYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIElmIGFsbCBjb2x1bW4gbG9jYXRpb24gdmFsdWVzIGluIHRoZSBhcnJheSBhcmUgZXF1YWxcclxuICAgICAgICAgICAgaWYgKGxvY2F0aW9ucy5ldmVyeShsb2NhdGlvbiA9PiBsb2NhdGlvblsxXSA9PT0gbG9jYXRpb25zWzBdWzFdKSAmJiBsb2NhdGlvbnMubGVuZ3RoID4gMSkge1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIEZsYXR0ZW4gMkQgYXJyYXkgaW50byAxRCBhcnJheSBvZiByb3cgbG9jYXRpb25zXHJcbiAgICAgICAgICAgICAgICBsZXQgcm93TG9jYXRpb25zID0gW107XHJcbiAgICAgICAgICAgICAgICBsb2NhdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvd0xvY2F0aW9ucy5wdXNoKHBhcnNlSW50KGVsZW1lbnRbMF0pKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcblxyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHJvdyA9IDE7IHJvdyA8PSA5OyByb3crKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghcm93TG9jYXRpb25zLmluY2x1ZGVzKHJvdykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoaXMgY2FuZGlkYXRlIGZyb20gYWxsIGlucHV0cyB0aGF0IHNoYXJlIHRoYXQgY29sIG51bWJlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVDYW5kaWRhdGUobG9jYXRpb25zWzBdWzFdLCByb3csIGNhbmRpZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufVxyXG5cclxuLyogcmVtb3ZlT3RoZXJDYW5kaWRhdGVzKCkgbm90IGN1cnJlbnRseSBuZWVkZWRcclxuYnV0IEknbSBsZWF2aW5nIHRoZSBjb2RlIGluIGhlcmUgaW4gY2FzZSBJIG5lZWQgaXQgbGF0ZXIhICovXHJcblxyXG4vLyAvLyBSZW1vdmUgYWxsIGNhbmRpZGF0ZXMgYXQgbG9jYXRpb24gZXhjZXB0IHZhbHVlXHJcbi8vIGZ1bmN0aW9uIHJlbW92ZU90aGVyQ2FuZGlkYXRlcyhyb3csIGNvbCkge1xyXG4vLyAgICAgbGV0IHZhbHVlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtcm93PVwiJyArIHJvdyArICdcIl1bZGF0YS1jb2w9XCInICsgY29sICsgJ1wiXScpLnZhbHVlO1xyXG4vLyAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtcm93PVwiJyArIHJvdyArICdcIl1bZGF0YS1jb2w9XCInICsgY29sICsgJ1wiXScpLmRhdGFzZXQuY2FuZGlkYXRlcyA9ICdbJyArIHZhbHVlICsgJ10nO1xyXG5cclxuLy8gICAgIC8vIERlYnVnIGxvZ1xyXG4vLyAgICAgY29uc29sZS5sb2coJ0VtcHRpZWQgYWxsIGJ1dCAnICsgdmFsdWUgKyAnIGF0ICcgKyByb3cgKyAnOicgKyBjb2wgKychJyk7XHJcbi8vICAgICBjb25zb2xlLmxvZyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1yb3c9XCInICsgcm93ICsgJ1wiXVtkYXRhLWNvbD1cIicgKyBjb2wgKyAnXCJdJykpO1xyXG4vLyB9Il19
